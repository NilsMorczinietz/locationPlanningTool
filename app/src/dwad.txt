import { useRef, useEffect } from "react";
import mapboxgl from "mapbox-gl";
import "mapbox-gl/dist/mapbox-gl.css";

import "./App.css";

function App(){
  const mapRef = useRef<mapboxgl.Map | null>(null);
  const mapContainerRef = useRef<HTMLDivElement | null>(null);

  useEffect(() => {
    mapboxgl.accessToken = "sk.eyJ1Ijoibmlsc21vcmN6aW5pZXR6IiwiYSI6ImNtNnRmaWluYTAyajUyanNnaHlxMDA5ZmMifQ.rtL9PcA1J9_yJ6IDmO-OFw";
    if (mapContainerRef.current && !mapRef.current) {
      mapRef.current = new mapboxgl.Map({
        container: mapContainerRef.current,
      });

      return () => {
        mapRef.current?.remove();
      };
    }
  }, []);

  return(
    <>
    Hallo
      <div id="map-container" ref={mapContainerRef}/>
    </>
  );
};

export default App;